<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Hacking on Salt (My PyCon Day 1 Sprint Experience)</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">A Pelican Blog </a></h1>
                <nav><ul>
                    <li><a href="/category/general.html">general</a></li>
                    <li><a href="/category/salt.html">salt</a></li>
                    <li class="active"><a href="/category/sysadmin.html">sysadmin</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/hacking-on-salt.html" rel="bookmark"
           title="Permalink to Hacking on Salt (My PyCon Day 1 Sprint Experience)">Hacking on Salt (My PyCon Day 1 Sprint Experience)</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-04-14T00:00:00">
                Mon 14 April 2014
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="/author/sean-zicari.html">Sean Zicari</a>
        </address>
<p>In <a href="/category/sysadmin.html">sysadmin</a>. </p>

</footer><!-- /.post-info -->      <div class="section" id="overview">
<h2>Overview</h2>
<p>PyCon ended yesterday, sprints began today. I was very excited to hack on salt,
because it's a tool I really like to use. My initial setup involved checking out
the code on my laptop and setting it up to run &quot;locally&quot; (meaning it runs as my
user and uses config files in non-standard places). I really didn't like this
approach though, because even though salt wasn't running as root, I still felt
like I could accidentally do some damage or pollute my laptop during
development. So, I decided to set up my dev environment in a virtual machine.</p>
</div>
<div class="section" id="the-setup">
<h2>The Setup</h2>
<p>I used vagrant with a <cite>precise64</cite> box, using VirtualBox as the hypervisor. This
is not an uncommon setup for me, as I use a similar setup for my side work.
These are the steps I took:</p>
<ol class="arabic simple">
<li>Install <a class="reference external" href="http://www.vagrantup.com/">vagrant</a>, <a class="reference external" href="https://www.virtualbox.org/">VirtualBox</a> and <a class="reference external" href="https://github.com/brainsik/virtualenv-burrito">virtualenv-burrito</a></li>
<li>Download the <cite>precise64</cite> box</li>
<li>Spin up a new VM</li>
<li>SSH into the new VM</li>
<li>Generate a new SSH keypair for the <cite>vagrant</cite> user</li>
<li>Associate the public key with my GitHub user account</li>
<li>Check out the code on the VM</li>
<li>Create a new virtualenv (I called it <cite>salt</cite>)</li>
<li>Run through the salt setup steps outlined in the <a class="reference external" href="https://github.com/saltstack/salt/blob/develop/HACKING.rst">salt setup doc</a>.</li>
<li>Exit the virtual machine</li>
<li>Create an SSHFS mount of the VM's code checkout on the host machine</li>
<li>Create a virtualenv on the host machine</li>
<li>Follow the same setup steps above, using the SSHFS-mounted code</li>
<li>Set up a new project in PyCharm and point it to the host machine's virtualenv</li>
</ol>
<p>I found this setup to be very useful, because I could do whatever I want to in
the virtual machine without harming the host, but I also don't have to pay for
the full version of PyCharm to take advantage of its excellent introspection
capabilities. PyCharm Professional comes with the capability to interface with a
remote python interpreter, so with that I would not have had to SSHFS mount the
code to the host and run through the salt setup steps twice, but I'm more
excited about the learned abilities more than the minor time savings.</p>
<p>I hope this helps someone.</p>
</div>

    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>